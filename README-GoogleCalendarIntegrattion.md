**# Google Calendar Integration**

GoogleCalendarController отвечает за создание события в котором участвует пользователь на его основном календаре Google.

Для того чтобы пользователь мог создать событие у себя в календаре Google, ему необходимо пройти oath2 авторизацию в его
Google аккаунте.

После авторизации пользователя происходит генерация токена для доступа нашего сервиса к сервису googleCalendar, данный
токен предоставляет доступ на создание события в календаре того пользователя который прошел авторизацию и предоставил
доступ. Данный токен сохраняется в базе данных, в новой таблице google_token.

При вызове эндпоинта createEvent в GoogleCalendarController вызывается метод сервиса который проверяет наличие записи в
таблице google_token для пользователя который вызвал этот эндпоинт и при наличии данного токена получает доступ к его
google календарю с помощью этого токена.

Если токен отсутствует в базе данных, сервис генерирует ссылку для авторизации пользователя и возвращает ему,
пользователь проходит авторизацию по этой ссылке. После успешного прохождения авторизации пользователем, googleApi
формирует callback вызов и передает параметр code в котором хранится сформированный токен , он вызывает handleCallback
эндпоинт в нашем сервисе, который сохраняет токен в базу данных и создает событие в google календаре пользователя.

Интеграция с googleApi реализована с помощью сторонней библиотеки google, зависимости прописаны в
файле [build.gradle](build.gradle.kts) под комментарием “Google Calendar“

В папке src/main/resources хранится credentials.json файл в котором хранятся все properties для доступа нашего
сервиса к Google Calendar Api, данные properties можно взять из
аккаунта [GoogleCloud](https://console.cloud.google.com/) в котором регистрируется
аккаунт компании,
создается новый проект и в этот проект добавляются доступы к необходимым api google сервисов.

На данный момент в файле credentials.json лежат properties тестового аккаунта с помощью которых можно создать событие
только для одного тестового аккаунта google.

Также все properties которые необходимы для конфигурации лежат в файле application.yaml под заголовком google-calendar.